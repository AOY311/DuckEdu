<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Comment</title>
    <link rel="stylesheet" href="comment.css" />

    <script src="https://kit.fontawesome.com/a0a7c0f0d8.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</head>

<body onload="hide_comment()">
    <div class="disc" id="disc-id">
        <!-- Your Input to Disscussion -->
        <div class="header-disc">
            <img src="./img/avt.png" alt="avatar" class="img-avt" />
            <textarea placeholder="Your discussion..." class="ip-disc" id="post-discusion-value"></textarea>
            <button type="submit" class="btn btn-post" id="post-discusion" onclick="postDiscusion()">
          POST
        </button>
        </div>
        <p id="dis_checkIp">INVALID</p>

        <!-- Body Disscussion -->
        <div class="body-disc">
            <!-- add div right there -->
            <div id="container-discusion"></div>
            <!-- posted disscussion -->
            <div class="posted-disc" id="test_id_2">
                <div class="username">
                    <img src="./img/avt.png" alt="avatar" class="img-avt" />
                </div>
                <textarea class="line-disc" id="test_id" readonly>
Lorem ipsum dolor sit amet conse ctetur adip iscing elit Proin rhoncus urna dictum.Lorem ipsum dolor sit amet conse ctetur adip iscing elit Proin rhoncus urna dictum
Lorem ipsum dolor sit amet conse ctetur adip iscing elit Proin rhoncus urna dictum.Lorem ipsum dolor sit amet conse ctetur adip iscing elit Proin rhoncus urna dictum
        </textarea
          >
          <button class="btn btn-edit" id="test_id_1" onclick="edit()">
            EDIT
          </button>
        </div>
        <div class="disc-react" id="post-form">
          <button class="btn btn-like">
            LIKE <i class="far fa-thumbs-up"></i></button
          ><button class="btn btn-cmt" onclick="hide_comment()">
            COMMENT <i class="far fa-comment-dots"></i>
          </button>
        </div>

        <!-- Cmt in another post -->
        <div class="cmt-in-cmt" id="myDIV">
          <div class="ur-new-cmt">
            <div class="username">
              <img src="./img/avt.png" alt="avatar" class="img-avt" />
            </div>
            <textarea
              placeholder="Your discussion..."
              class="ip-disc"
              id="post-comment-value"
            ></textarea>
                <button type="submit" class="btn btn-post" id="post-comment" onclick="postComment()">
              POST
            </button>
            </div>
            <p id="com_checkIp">INVALID</p>

            <div id="container-comment"></div>

            <div class="oth-cmted">
                <div class="username">
                    <img src="./img/avt.png" alt="avatar" class="img-avt img-oth" />
                </div>
                <textarea class="line-disc" readonly>
Lorem ipsum dolor sit amet conse ctetur adip iscing elit Proin rhonc us urna dictum
            </textarea>
                <button class="btn btn-like">
              LIKE <i class="far fa-thumbs-up"></i>
            </button>
            </div>
            <!-- <div class="disc-react">
          </div> -->
        </div>
    </div>
    </div>

    <script>
        const textarea = document.querySelectorAll("textarea");
        textarea.forEach((element) => {
            element.addEventListener("keyup", (e) => {
                element.style.height = "40px";
                let scHeight = e.target.scrollHeight;
                element.style.height = `${scHeight}px`;
            });
        });
        window.onload = function() {
            hide_comment();
        };

        function hide_comment() {
            var x = document.getElementById("myDIV");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        function autoheight() {
            $(".line-disc").each(function() {
                $(this).height(this.scrollHeight);
            });
        }

        $(document).ready(function() {
            autoheight();
        });

        function postDiscusion() {
            var ms = document.getElementById("dis_checkIp");
            var textarea = document.getElementById("post-discusion-value");
            var result = textarea.value;
            if (!result.trim() == "") {
                ms.style.display = "none";

                jQuery("#container-discusion").append(
                    '<div class="posted-disc"><div class="username"><img src="./img/avt.png" alt="avatar" class="img-avt" /></div>' +
                    '<textarea class="line-disc" readonly>' +
                    result +
                    "</textarea>" +
                    '<button class="btn btn-edit">EDIT</button></div><div class="disc-react"><button class="btn btn-like">LIKE <i class="far fa-thumbs-up"></i></button><button class="btn btn-cmt" onclick="hide_comment()">COMMENT <i class="far fa-comment-dots"></i></button></div>'
                );
                autoheight();
            } else {
                ms.style.display = "block";
            }

            textarea.value = "";

            //clean text area when submit
        }

        function postComment() {
            var ms = document.getElementById("com_checkIp");

            var textarea = document.getElementById("post-comment-value");
            var result = textarea.value;
            if (!result.trim() == "") {
                ms.style.display = "none";

                jQuery("#container-comment").append(
                    '<div class="oth-cmted"><div class="username"><img src="./img/avt.png" alt="avatar" class="img-avt img-oth" /></div>' +
                    '<textarea  class="line-disc" readonly>' +
                    result +
                    "</textarea>" +
                    '<button class="btn btn-like">LIKE <i class="far fa-thumbs-up"></i></div>'
                );
                autoheight();
            } else {
                ms.style.display = "block";
            }
            textarea.value = ""; //clean text area when submit
        }

        function edit() {
            var elem = document.getElementById("test_id_1");
            if (elem.innerHTML == "EDIT") {
                elem.innerHTML = "DONE";
                document.getElementById("test_id").readOnly = false;
            } else {
                elem.innerHTML = "EDIT";
                document.getElementById("test_id").readOnly = true;
            }
        }

        // function edit() {
        //   var elem = document.getElementById("test_id_1");
        //   if (elem.innerHTML == "EDIT") {
        //     elem.innerHTML = "DONE";
        //     document.getElementById("test_id").readOnly = false;
        //   }
        //   else {
        //     elem.innerHTML = "EDIT";
        //     document.getElementById("test_id").readOnly = true;

        //   }
        // }
    </script>
</body>

</html>